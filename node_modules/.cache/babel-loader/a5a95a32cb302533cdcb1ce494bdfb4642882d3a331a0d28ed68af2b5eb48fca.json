{"ast":null,"code":"var express=require(\"express\");var mongoose=require(\"mongoose\");var bodyParser=require(\"body-parser\");var app=express();app.set('view engine','ejs');app.use(express.static(\"public\"));app.use(bodyParser.urlencoded({extended:true}));app.use(express.json());mongoose.connect(\"mongodb://127.0.0.1:27017/todolistDB\",{useNewUrlParser:true,useUnifiedTopology:true});var itemSchema={name:String};var Item=mongoose.model(\"Item\",itemSchema);var item1=new Item({name:\"Activity 1\"});var item2=new Item({name:\"Activity 2\"});var item3=new Item({name:\"Activity 3\"});var defaultItem=[item1,item2,item3];/*\r\nItem.insertMany(defaultItem).then(function(){\r\n    console.log(\"successfully saved default items to db\");\r\n})\r\n.catch(function(err){\r\n    console.log(err);\r\n});\r\n*/app.get(\"/\",function(req,res){// res.send(\"<h1>Hey guys!!</h1>\");\nItem.find({},function(err,f){// console.log(f);\nif(f.length===0){Item.insertMany(defaultItem,function(err){if(err){console.log(err);}else{console.log(\"Successfully saved items to DB\");}});res.redirect(\"/\");}else{res.render(\"list\",{newListItems:f});}});});app.post(\"/\",function(req,res){var itemName=req.body.n;// console.log(i);\n// i1.push(i);\n//res.render(\"list\",{newListItems:f}); \n// res.redirect(\"/\");\nvar item=new Item({name:itemName});item.save();});app.post(\"/delete\",function(req,res){var check=req.body.checkbox;Item.findByIdAndRemove(check,function(err){if(!err){console.log(\"Successfully deleted\");res.redirect(\"/\");}});});app.listen(4000,function(){console.log(\"Server is listening to port 4000\");});","map":{"version":3,"names":["express","require","mongoose","bodyParser","app","set","use","static","urlencoded","extended","json","connect","useNewUrlParser","useUnifiedTopology","itemSchema","name","String","Item","model","item1","item2","item3","defaultItem","get","req","res","find","err","f","length","insertMany","console","log","redirect","render","newListItems","post","itemName","body","n","item","save","check","checkbox","findByIdAndRemove","listen"],"sources":["C:/Users/User/Desktop/todo/src/index.js"],"sourcesContent":["var express=require(\"express\");\r\nvar mongoose =require(\"mongoose\");\r\nvar bodyParser=require(\"body-parser\");\r\nvar app=express();\r\napp.set('view engine','ejs');\r\napp.use(express.static(\"public\"));\r\napp.use(bodyParser.urlencoded({extended:true}));\r\napp.use(express.json());\r\nmongoose.connect(\"mongodb://127.0.0.1:27017/todolistDB\",{useNewUrlParser:true,useUnifiedTopology:true});\r\nconst itemSchema ={\r\n    name:String\r\n}\r\nconst Item=mongoose.model(\"Item\",itemSchema);\r\nconst item1= new Item({\r\n    name :\"Activity 1\",\r\n});\r\nconst item2= new Item({\r\n    name :\"Activity 2\",\r\n});const item3= new Item({\r\n    name :\"Activity 3\",\r\n});\r\nconst defaultItem=[item1,item2,item3];\r\n/*\r\nItem.insertMany(defaultItem).then(function(){\r\n    console.log(\"successfully saved default items to db\");\r\n})\r\n.catch(function(err){\r\n    console.log(err);\r\n});\r\n*/\r\napp.get(\"/\",function(req,res){\r\n // res.send(\"<h1>Hey guys!!</h1>\");\r\n Item.find({},function(err,f)\r\n {\r\n    // console.log(f);\r\n    if(f.length===0)\r\n    {\r\n      Item.insertMany(defaultItem,function(err)\r\n      {\r\n          if(err){\r\n              console.log(err);\r\n          }\r\n          else{\r\n              console.log(\"Successfully saved items to DB\");\r\n          }\r\n      });\r\n      res.redirect(\"/\");\r\n    }\r\n    else{\r\n    res.render(\"list\",{newListItems:f});\r\n    }\r\n });\r\n\r\n})\r\n\r\napp.post(\"/\",function(req,res){\r\n\r\n      const itemName=req.body.n; \r\n    // console.log(i);\r\n   // i1.push(i);\r\n    //res.render(\"list\",{newListItems:f}); \r\n   // res.redirect(\"/\");\r\n   const item=new Item({\r\n     name:itemName\r\n   });\r\n   item.save();\r\n});\r\n\r\napp.post(\"/delete\",function(req,res){\r\n\r\n    const check=req.body.checkbox;\r\n    Item.findByIdAndRemove(check,function(err)\r\n    {\r\n        if(!err)\r\n        {\r\n            console.log(\"Successfully deleted\");\r\n            res.redirect(\"/\");\r\n        }\r\n      })\r\n});\r\n\r\n\r\n\r\napp.listen(4000,function()\r\n{\r\n    console.log(\"Server is listening to port 4000\");\r\n})"],"mappings":"AAAA,GAAI,CAAAA,OAAO,CAACC,OAAO,CAAC,SAAS,CAAC,CAC9B,GAAI,CAAAC,QAAQ,CAAED,OAAO,CAAC,UAAU,CAAC,CACjC,GAAI,CAAAE,UAAU,CAACF,OAAO,CAAC,aAAa,CAAC,CACrC,GAAI,CAAAG,GAAG,CAACJ,OAAO,CAAC,CAAC,CACjBI,GAAG,CAACC,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,CAC5BD,GAAG,CAACE,GAAG,CAACN,OAAO,CAACO,MAAM,CAAC,QAAQ,CAAC,CAAC,CACjCH,GAAG,CAACE,GAAG,CAACH,UAAU,CAACK,UAAU,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAC/CL,GAAG,CAACE,GAAG,CAACN,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC,CACvBR,QAAQ,CAACS,OAAO,CAAC,sCAAsC,CAAC,CAACC,eAAe,CAAC,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CACvG,GAAM,CAAAC,UAAU,CAAE,CACdC,IAAI,CAACC,MACT,CAAC,CACD,GAAM,CAAAC,IAAI,CAACf,QAAQ,CAACgB,KAAK,CAAC,MAAM,CAACJ,UAAU,CAAC,CAC5C,GAAM,CAAAK,KAAK,CAAE,GAAI,CAAAF,IAAI,CAAC,CAClBF,IAAI,CAAE,YACV,CAAC,CAAC,CACF,GAAM,CAAAK,KAAK,CAAE,GAAI,CAAAH,IAAI,CAAC,CAClBF,IAAI,CAAE,YACV,CAAC,CAAC,CAAC,GAAM,CAAAM,KAAK,CAAE,GAAI,CAAAJ,IAAI,CAAC,CACrBF,IAAI,CAAE,YACV,CAAC,CAAC,CACF,GAAM,CAAAO,WAAW,CAAC,CAACH,KAAK,CAACC,KAAK,CAACC,KAAK,CAAC,CACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EACAjB,GAAG,CAACmB,GAAG,CAAC,GAAG,CAAC,SAASC,GAAG,CAACC,GAAG,CAAC,CAC5B;AACAR,IAAI,CAACS,IAAI,CAAC,CAAC,CAAC,CAAC,SAASC,GAAG,CAACC,CAAC,CAC3B,CACG;AACA,GAAGA,CAAC,CAACC,MAAM,GAAG,CAAC,CACf,CACEZ,IAAI,CAACa,UAAU,CAACR,WAAW,CAAC,SAASK,GAAG,CACxC,CACI,GAAGA,GAAG,CAAC,CACHI,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC,CACpB,CAAC,IACG,CACAI,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CACjD,CACJ,CAAC,CAAC,CACFP,GAAG,CAACQ,QAAQ,CAAC,GAAG,CAAC,CACnB,CAAC,IACG,CACJR,GAAG,CAACS,MAAM,CAAC,MAAM,CAAC,CAACC,YAAY,CAACP,CAAC,CAAC,CAAC,CACnC,CACH,CAAC,CAAC,CAEH,CAAC,CAAC,CAEFxB,GAAG,CAACgC,IAAI,CAAC,GAAG,CAAC,SAASZ,GAAG,CAACC,GAAG,CAAC,CAExB,GAAM,CAAAY,QAAQ,CAACb,GAAG,CAACc,IAAI,CAACC,CAAC,CAC3B;AACD;AACC;AACD;AACA,GAAM,CAAAC,IAAI,CAAC,GAAI,CAAAvB,IAAI,CAAC,CAClBF,IAAI,CAACsB,QACP,CAAC,CAAC,CACFG,IAAI,CAACC,IAAI,CAAC,CAAC,CACd,CAAC,CAAC,CAEFrC,GAAG,CAACgC,IAAI,CAAC,SAAS,CAAC,SAASZ,GAAG,CAACC,GAAG,CAAC,CAEhC,GAAM,CAAAiB,KAAK,CAAClB,GAAG,CAACc,IAAI,CAACK,QAAQ,CAC7B1B,IAAI,CAAC2B,iBAAiB,CAACF,KAAK,CAAC,SAASf,GAAG,CACzC,CACI,GAAG,CAACA,GAAG,CACP,CACII,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnCP,GAAG,CAACQ,QAAQ,CAAC,GAAG,CAAC,CACrB,CACF,CAAC,CAAC,CACR,CAAC,CAAC,CAIF7B,GAAG,CAACyC,MAAM,CAAC,IAAI,CAAC,UAChB,CACId,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC,CACnD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}